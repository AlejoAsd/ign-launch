<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>WebSocket Test</title>
  <script src='https://cdn.rawgit.com/dcodeIO/protobuf.js/6.8.8/dist/protobuf.min.js'></script>
  <script src='eventemitter2.min.js'></script>
  <script src='ign.js'></script>

  <script>
    // Create the Connection to the Ignition websocket server
    var ign = new Ignition({
      url: 'ws://localhost:9002'
    });

    // Listen for the 'connection' event.
    ign.on('connection', function() {
      var output = document.getElementById('status');
      output.innerHTML = 'Status: connected';
    });

    // Create the clock subscriber
    var clockSub = new Topic({
      ign: ign,
      name: '/clock',
      messageType : 'ignition.msgs.Clock',
      callback: function(msg) {
        var output = document.getElementById('output');
        output.innerHTML = 'Clock: ' + msg.sim.sec + '.' + msg.sim.nsec;
      }
    });

    // Todo:
    // 1. load the gz3d module.
    // 2. Show simple shapes.
    // 3. Get the meshes and other resource from the server.
  </script>
  </head>

  <body>
    <div id='status'>Status: disconnected</div>
    <div id='output'></div>
  </body>
</html>
